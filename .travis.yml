language: node_js
node_js:
  - "11"

cache:
  yarn: true
  directories:
    - "node_modules"

before_install:
  - curl -o- -L https://yarnpkg.com/install.sh | bash -s -- --version version-number
  - export PATH="$HOME/.yarn/bin:$PATH"
  - yarn global add gulp-cli
  - openssl aes-256-cbc -K $encrypted_714054dadbd0_key -iv $encrypted_714054dadbd0_iv
    -in tutor.json.enc -out ./tutor.json -d

deploy:
  - provider: script
    script: npm run production
    on:
      branch: master

  - provider: script
    script: npm run test
    on:
      branch: test
